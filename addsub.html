<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Subscription</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: url("images/img70.jpg") no-repeat center center/cover;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 40px 15px;
    }

    .container {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
      max-width: 800px;
      width: 100%;
      animation: fadeIn 1s ease-in-out, floatUp 2s ease-in-out;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      font-size: large;
      font-style: oblique;
      color: rgb(2, 170, 237);
    }

    .form-control, .form-select {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.4);
      color: #fff;
      font-weight: 500;
      border-radius: 10px;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      transition: all 0.3s ease;
    }

    .form-control::placeholder { color: #f1f1f1; }

    .form-control:focus, .form-select:focus {
      background: rgba(255, 255, 255, 0.3);
      border-color: #2c3e50;
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
      color: #fff;
    }

    .container:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      font-weight: bold;
      color:#2e0101;
      text-shadow: 1px 1px 5px rgba(0,0,0,0.6);
    }

    .btn-primary {
      background: linear-gradient(135deg, #1d013a, #7b5102);
      border: none;
      transition: transform 0.2s ease, background 0.3s ease;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      background: linear-gradient(135deg, #00434c, #66035c);
    }

    .form-control.is-invalid, .form-select.is-invalid {
      border-color: #ff9800 !important;
      box-shadow: 0 0 6px rgba(255, 152, 0, 0.7);
      font-weight: bold;
    }

    .form-control.is-valid, .form-select.is-valid {
      border-color: #4caf50 !important;
      box-shadow: 0 0 6px rgba(76, 175, 80, 0.7);
    }

    .invalid-feedback {
      color: #ff9800 !important;
      font-weight: 600;
      text-shadow: 0 0 3px rgba(0,0,0,0.4);
      animation: fadeInError 0.4s ease-in-out;
    }

    label, .form-label {
      color: #2e0101;
      font-weight: 800;
    }

    option { color: #000; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes floatUp {
      0% { transform: translateY(30px); opacity: 0; }
      100% { transform: translateY(0); opacity: 1; }
    }

    @keyframes fadeInError {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

<div class="container">
  <h2>Add New Subscription</h2>
  <form id="subscriptionForm" novalidate>
    <div class="mb-3">
      <label for="name" class="form-label">Subscription Name</label>
      <input type="text" id="name" class="form-control" placeholder="Enter subscription name">
      <div class="invalid-feedback">Subscription name is required</div>
    </div>

    <div class="mb-3">
      <label for="price" class="form-label">Price (₹)</label>
      <input type="text" id="price" class="form-control" placeholder="Enter price">
      <div class="invalid-feedback">Price must be a positive number</div>
    </div>

    <div class="mb-3">
      <label for="renewalDate" class="form-label">Renewal Date</label>
      <input type="date" id="renewalDate" class="form-control">
      <div class="invalid-feedback">Renewal date is required</div>
    </div>

    <div class="mb-3">
      <label for="cycle" class="form-label">Renewal Cycle</label>
      <select id="cycle" class="form-select">
        <option value="">--Select--</option>
        <option value="Monthly">Monthly</option>
        <option value="Yearly">Yearly</option>
      </select>
      <div class="invalid-feedback">Renewal cycle is required</div>
    </div>
    <br>

    <button type="submit" class="btn btn-primary w-100">Add Subscription</button>
  </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const form = document.getElementById('subscriptionForm');
const nameInput = document.getElementById('name');
const priceInput = document.getElementById('price');
const dateInput = document.getElementById('renewalDate');
const cycleSelect = document.getElementById('cycle');

form.addEventListener('submit', function(e) {
  e.preventDefault();

  let isValid = true;

  if (nameInput.value.trim() === '') { showError(nameInput); isValid = false; } 
  else { showSuccess(nameInput); }

  const priceVal = Number(priceInput.value);
  if (priceInput.value.trim() === '' || isNaN(priceVal) || priceVal <= 0) {
    showError(priceInput); isValid = false;
  } else { showSuccess(priceInput); }

  if (dateInput.value === '') { showError(dateInput); isValid = false; } 
  else { showSuccess(dateInput); }

  if (cycleSelect.value === '') { showError(cycleSelect); isValid = false; } 
  else { showSuccess(cycleSelect); }

  if (!isValid) return;

  // Store in the same format as the subscriptions page
  const newSub = {
    name: nameInput.value.trim(),
    renewal: dateInput.value,  // use "renewal" to match display page
    amount: "₹" + priceVal,
    cycle: cycleSelect.value   // optional, for future use
  };

  const storedSubs = JSON.parse(localStorage.getItem("subscriptions")) || [];
  storedSubs.push(newSub);
  localStorage.setItem("subscriptions", JSON.stringify(storedSubs));

  alert("Subscription Added Successfully!");

  form.reset();
  [nameInput, priceInput, dateInput, cycleSelect].forEach(el => el.classList.remove('is-valid'));
});

function showError(input) {
  input.classList.add('is-invalid');
  input.classList.remove('is-valid');
}

function showSuccess(input) {
  input.classList.remove('is-invalid');
  input.classList.add('is-valid');
}
</script>

</body>
</html>
